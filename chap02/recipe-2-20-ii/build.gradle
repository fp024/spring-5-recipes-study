plugins {
  id 'application'
  id "io.freefair.lombok" version "${lombokPluginVersion}"
  id "io.freefair.aspectj.post-compile-weaving" version "${postCompileWeavingVersion}"
}

java {
  toolchain {
    languageVersion = JavaLanguageVersion.of("${javaVersion}")
  }
}

apply from: "../../gradle/default-settings.gradle"

dependencies {
  implementation "org.springframework:spring-context:${springVersion}"

  implementation "javax.annotation:javax.annotation-api:${javaxAnnotationApiVersion}"

  implementation "org.aspectj:aspectjweaver:${aspectjVersion}"    
  
  // Gralde 빌드시 경고가 발생하는데, post-compile-weaving 플러그인이 aspectjrt.jar가 클래스 패스에 없기만 하면 저런 오류를 노출하는 것 같음.
  //   [warning] couldn't find aspectjrt.jar on classpath, checked: ... 
  //   TODO: 나중에 플러그인 제작자분께 질문을 올려보자!
  //   https://github.com/freefair/gradle-plugins/discussions/categories/q-a
  implementation "org.aspectj:aspectjrt:${aspectjVersion}"    

  testImplementation "org.springframework:spring-test:${springVersion}"
  testImplementation "org.mockito:mockito-junit-jupiter:${mockitoVersion}"
}

application {
  mainClass = 'org.fp024.study.spring5recipes.calculator.Main'
}